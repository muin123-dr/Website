<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tes Kecemasan GAD-7</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #eef5f9;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align at the top for better scrolling on mobile */
            min-height: 100vh;
            box-sizing: border-box;
        }
        .container {
            width: 100%;
            max-width: 600px; /* Lebar maksimum untuk smartphone */
            margin: 20px auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        p {
            text-align: center;
            margin-bottom: 25px;
            font-size: 0.95em;
        }
        .question-block {
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fcfcfc;
            transition: box-shadow 0.3s ease, opacity 0.5s ease;
            opacity: 0; /* Hidden by default */
            display: none; /* Hidden by default */
        }
        .question-block.active {
            opacity: 1;
            display: block;
        }
        .question-block:hover {
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        }
        .question-block label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #444;
            font-size: 1em;
        }
        .options label {
            display: flex; /* Menggunakan flexbox untuk penataan */
            align-items: center;
            padding: 10px 0;
            cursor: pointer;
            font-weight: normal;
            transition: background-color 0.2s ease;
            border-radius: 4px;
        }
        .options label:hover {
            background-color: #f0f0f0;
        }
        input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.1);
            flex-shrink: 0; /* Mencegah radio button mengecil */
        }
        /* Navigation buttons are now removed from HTML, so their styles are largely irrelevant */
        .navigation-buttons {
            display: none; /* Hide this container completely */
        }
        button[type="submit"] {
            display: none; /* Hide the submit button until the end */
            width: 100%;
            padding: 14px;
            background-color: #007bff; /* Warna biru lebih modern */
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            margin-top: 25px;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0, 123, 255, 0.2);
        }
        button[type="submit"]:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        button[type="submit"]:active {
            transform: translateY(0);
        }

        .progress-indicator {
            text-align: center;
            margin-top: 15px;
            font-size: 0.9em;
            color: #555;
        }

        /* Modal (Notifikasi Mengambang) */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal.show {
            display: flex; /* Changed to flex to center */
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 25px;
            border-radius: 12px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            animation: fadeInScale 0.3s ease-out;
            position: relative;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-content h2 {
            text-align: center;
            color: #007bff;
            margin-bottom: 20px;
            font-size: 1.6em;
        }
        #modal-score {
            font-size: 2.2em;
            font-weight: bold;
            color: #28a745;
            text-align: center;
            margin-bottom: 15px;
        }
        #modal-explanation {
            font-size: 1em;
            color: #555;
            text-align: center;
            margin-bottom: 25px;
        }
        .close-button {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 15px;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .close-button:hover,
        .close-button:focus {
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        .share-button {
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.9em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            text-decoration: none;
            color: white;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .share-whatsapp {
            background-color: #25D366;
        }
        .share-whatsapp:hover {
            background-color: #1DA851;
            transform: translateY(-1px);
        }
        .share-telegram {
            background-color: #0088CC;
        }
        .share-telegram:hover {
            background-color: #006AA7;
            transform: translateY(-1px);
        }
        .share-copy {
            background-color: #6c757d;
        }
        .share-copy:hover {
            background-color: #5a6268;
            transform: translateY(-1px);
        }
        .share-button i {
            font-size: 1.2em;
        }

        .disclaimer {
            margin-top: 30px;
            font-size: 0.85em;
            color: #777;
            text-align: center;
            padding: 15px;
            background-color: #fff8e1; /* Warna kuning lebih soft */
            border: 1px solid #ffeeba;
            border-radius: 8px;
        }

        /* Font Awesome for Icons */
        @import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css");
    </style>
</head>
<body>
    <div class="container">
        <h1>Tes Kecemasan GAD-7</h1>
        <p>
            Selama DUA MINGGU TERAKHIR, seberapa sering Anda terganggu oleh masalah-masalah berikut?
        </p>

        <form id="gad7-form">
            <div class="question-block" id="q-block-1">
                <label>1. Merasa gugup, cemas, atau tegang?</label>
                <div class="options">
                    <label><input type="radio" name="q1" value="0" required> Tidak sama sekali</label>
                    <label><input type="radio" name="q1" value="1"> Beberapa hari</label>
                    <label><input type="radio" name="q1" value="2"> Lebih dari separuh hari</label>
                    <label><input type="radio" name="q1" value="3"> Hampir setiap hari</label>
                </div>
            </div>

            <div class="question-block" id="q-block-2">
                <label>2. Tidak mampu menghentikan atau mengendalikan kekhawatiran?</label>
                <div class="options">
                    <label><input type="radio" name="q2" value="0" required> Tidak sama sekali</label>
                    <label><input type="radio" name="q2" value="1"> Beberapa hari</label>
                    <label><input type="radio" name="q2" value="2"> Lebih dari separuh hari</label>
                    <label><input type="radio" name="q2" value="3"> Hampir setiap hari</label>
                </div>
            </div>

            <div class="question-block" id="q-block-3">
                <label>3. Terlalu banyak mengkhawatirkan berbagai hal?</label>
                <div class="options">
                    <label><input type="radio" name="q3" value="0" required> Tidak sama sekali</label>
                    <label><input type="radio" name="q3" value="1"> Beberapa hari</label>
                    <label><input type="radio" name="q3" value="2"> Lebih dari separuh hari</label>
                    <label><input type="radio" name="q3" value="3"> Hampir setiap hari</label>
                </div>
            </div>

            <div class="question-block" id="q-block-4">
                <label>4. Sulit bersantai?</label>
                <div class="options">
                    <label><input type="radio" name="q4" value="0" required> Tidak sama sekali</label>
                    <label><input type="radio" name="q4" value="1"> Beberapa hari</label>
                    <label><input type="radio" name="q4" value="2"> Lebih dari separuh hari</label>
                    <label><input type="radio" name="q4" value="3"> Hampir setiap hari</label>
                </div>
            </div>

            <div class="question-block" id="q-block-5">
                <label>5. Sangat gelisah sehingga sulit untuk duduk diam?</label>
                <div class="options">
                    <label><input type="radio" name="q5" value="0" required> Tidak sama sekali</label>
                    <label><input type="radio" name="q5" value="1"> Beberapa hari</label>
                    <label><input type="radio" name="q5" value="2"> Lebih dari separuh hari</label>
                    <label><input type="radio" name="q5" value="3"> Hampir setiap hari</label>
                </div>
            </div>

            <div class="question-block" id="q-block-6">
                <label>6. Menjadi mudah tersinggung atau marah?</label>
                <div class="options">
                    <label><input type="radio" name="q6" value="0" required> Tidak sama sekali</label>
                    <label><input type="radio" name="q6" value="1"> Beberapa hari</label>
                    <label><input type="radio" name="q6" value="2"> Lebih dari separuh hari</label>
                    <label><input type="radio" name="q6" value="3"> Hampir setiap hari</label>
                </div>
            </div>

            <div class="question-block" id="q-block-7">
                <label>7. Merasa takut seolah-olah sesuatu yang mengerikan akan terjadi?</label>
                <div class="options">
                    <label><input type="radio" name="q7" value="0" required> Tidak sama sekali</label>
                    <label><input type="radio" name="q7" value="1"> Beberapa hari</label>
                    <label><input type="radio" name="q7" value="2"> Lebih dari separuh hari</label>
                    <label><input type="radio" name="q7" value="3"> Hampir setiap hari</label>
                </div>
            </div>

            <div class="progress-indicator" id="progressIndicator"></div>

            <button type="submit" id="submitBtn">Lihat Hasil</button>
        </form>

        <div class="disclaimer">
            **Penting:** Tes GAD-7 ini hanyalah alat skrining awal dan bukan pengganti diagnosis dari profesional kesehatan mental. Hasil dari tes ini seharusnya menjadi panduan untuk Anda mempertimbangkan mencari bantuan lebih lanjut dari psikolog atau psikiater jika diperlukan.
        </div>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Hasil Tes GAD-7 Anda</h2>
            <p>Skor Anda: <span id="modal-score"></span></p>
            <p id="modal-explanation"></p>

            <div class="share-buttons">
                <a href="#" id="shareWhatsapp" class="share-button share-whatsapp" target="_blank">
                    <i class="fab fa-whatsapp"></i> WhatsApp
                </a>
                <a href="#" id="shareTelegram" class="share-button share-telegram" target="_blank">
                    <i class="fab fa-telegram-plane"></i> Telegram
                </a>
                <button id="copyLink" class="share-button share-copy">
                    <i class="fas fa-copy"></i> Salin Link
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentQuestionIndex = 0;
        const questionBlocks = document.querySelectorAll('.question-block');
        const submitBtn = document.getElementById('submitBtn');
        const progressIndicator = document.getElementById('progressIndicator');
        const totalQuestions = questionBlocks.length;

        function showQuestion(index) {
            questionBlocks.forEach((block, i) => {
                block.classList.remove('active');
                block.style.display = 'none';
            });
            if (questionBlocks[index]) { // Ensure the index is valid
                questionBlocks[index].classList.add('active');
                questionBlocks[index].style.display = 'block';
                updateProgressIndicator();
            } else {
                // If there are no more questions, show the submit button and handle submission
                submitBtn.style.display = 'block';
                progressIndicator.textContent = ''; // Clear progress indicator
            }
        }

        function updateProgressIndicator() {
            if (currentQuestionIndex < totalQuestions) {
                progressIndicator.textContent = `Pertanyaan ${currentQuestionIndex + 1} dari ${totalQuestions}`;
            }
        }

        // Add event listeners to all radio buttons
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', () => {
                // Get the name of the radio group (e.g., 'q1', 'q2')
                const questionName = radio.name;
                // Find the index of the current question based on its name (e.g., 'q1' -> 0, 'q2' -> 1)
                const qIndex = parseInt(questionName.replace('q', '')) - 1;

                // Only advance if the answered question is the currently displayed one
                if (qIndex === currentQuestionIndex) {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < totalQuestions) {
                        showQuestion(currentQuestionIndex);
                    } else {
                        // All questions answered, trigger form submission
                        document.getElementById('gad7-form').dispatchEvent(new Event('submit'));
                    }
                }
            });
        });


        document.getElementById('gad7-form').addEventListener('submit', function(event) {
            event.preventDefault();

            let score = 0;
            const questions = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7'];
            let allAnswered = true;

            questions.forEach(qName => {
                const selectedOption = document.querySelector(`input[name="${qName}"]:checked`);
                if (selectedOption) {
                    score += parseInt(selectedOption.value);
                } else {
                    allAnswered = false;
                }
            });

            if (!allAnswered) {
                alert("Mohon jawab semua pertanyaan sebelum melihat hasil.");
                return;
            }

            document.getElementById('modal-score').textContent = score;

            let explanation = '';
            if (score >= 15) {
                explanation = "Tingkat kecemasan Anda tergolong **berat**. Sangat disarankan untuk segera mencari bantuan dari psikolog atau psikiater. Mereka dapat melakukan evaluasi lebih lanjut dan merekomendasikan terapi yang sesuai.";
            } else if (score >= 10) {
                explanation = "Tingkat kecemasan Anda tergolong **sedang**. Disarankan untuk berkonsultasi dengan profesional kesehatan mental seperti psikolog untuk mendapatkan panduan dan dukungan.";
            } else if (score >= 5) {
                explanation = "Tingkat kecemasan Anda tergolong **ringan**. Anda mungkin mengalami gejala kecemasan ringan. Pertimbangkan untuk menerapkan strategi pengelolaan stres seperti olahraga, relaksasi, atau berbicara dengan orang terdekat. Jika gejala memburuk atau bertahan, jangan ragu mencari bantuan profesional.";
            } else {
                explanation = "Tingkat kecemasan Anda tergolong **minimal**. Ini menunjukkan bahwa gejala kecemasan yang Anda alami sangat sedikit atau tidak ada. Pertahankan gaya hidup sehat dan tetap waspada terhadap perubahan suasana hati.";
            }

            document.getElementById('modal-explanation').innerHTML = explanation;

            const modal = document.getElementById('resultModal');
            modal.classList.add('show');

            const currentUrl = window.location.href;
            const shareText = `Halo! Saya baru saja mencoba Tes Kecemasan GAD-7. Hasilnya menunjukkan *${explanation.split('.')[0]}*. Jika Anda juga ingin mencobanya, Anda bisa akses di ${currentUrl}`;

            document.getElementById('shareWhatsapp').href = `https://api.whatsapp.com/send?text=${encodeURIComponent(shareText)}`;
            document.getElementById('shareTelegram').href = `https://t.me/share/url?url=${encodeURIComponent(currentUrl)}&text=${encodeURIComponent(shareText)}`;
        });

        // Modal logic
        const modal = document.getElementById('resultModal');
        const closeButton = document.querySelector('.close-button');

        closeButton.addEventListener('click', () => {
            modal.classList.remove('show');
        });

        window.addEventListener('click', (event) => {
            if (event.target == modal) {
                modal.classList.remove('show');
            }
        });

        document.getElementById('copyLink').addEventListener('click', () => {
            const currentUrl = window.location.href;
            navigator.clipboard.writeText(currentUrl).then(() => {
                alert("Link telah disalin!");
            }).catch(err => {
                console.error('Gagal menyalin link:', err);
                alert("Gagal menyalin link. Silakan salin manual.");
            });
        });

        // Initialize the first question
        showQuestion(currentQuestionIndex);
    </script>
</body>
</html>
